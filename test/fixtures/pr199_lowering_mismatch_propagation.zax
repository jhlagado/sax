op maybe_leak(cc: NZ)
  if cc
    push bc
  else
    nop
  end
end

export func mismatch_if_else(a: byte): void
  var
    scratch: byte
  end
  if nz
    push bc
  else
    nop
  end
  ret
end

export func mismatch_while(a: byte): void
  var
    scratch: byte
  end
  while nz
    push bc
  end
  ret
end

export func mismatch_repeat(a: byte): void
  var
    scratch: byte
  end
  repeat
    push bc
  until z
  ret
end

export func mismatch_select(a: byte): void
  var
    scratch: byte
  end
  select a
    case 0
      push bc
    case 1
      nop
  end
  ret
end

export func mismatch_op_boundary(a: byte): void
  var
    scratch: byte
  end
  maybe_leak nz
  ret
end
